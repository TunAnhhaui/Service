"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[548],{7548:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col gap-4"},[e("div",{staticClass:"grid grid-cols-2 md:grid-cols-4 gap-5"},[e("div",{staticClass:"flex flex-col justify-center text-sm bg-white p-2 shadow-2xl h-24 rounded-lg"},[e("div",{staticClass:"flex justify-between items-center"},[e("p",[t._v("Tổng sản phẩm")]),e("VueIcon",{staticClass:"text-orange-500",attrs:{type:"mdi",path:t.mdiPackageVariantClosed,size:"30"}})],1),e("p",{staticClass:"text-orange-500"},[t._v(t._s(t.productCount)+" ")])]),e("div",{staticClass:"flex flex-col justify-center text-sm bg-white p-2 shadow-2xl h-24 rounded-lg"},[e("div",{staticClass:"flex justify-between items-center"},[e("p",[t._v("Tổng khách hàng")]),e("VueIcon",{staticClass:"text-green-500",attrs:{type:"mdi",path:t.mdiAccount,size:"30"}})],1),e("p",{staticClass:"text-green-500"},[t._v(t._s(t.userCount))])]),e("div",{staticClass:"flex flex-col justify-center text-sm bg-white p-2 shadow-2xl h-24 rounded-lg"},[e("div",{staticClass:"flex justify-between items-center"},[e("p",[t._v("Tổng đơn hàng")]),e("VueIcon",{staticClass:"text-red-500",attrs:{type:"mdi",path:t.mdiShoppingOutline,size:"30"}})],1),e("p",{staticClass:"text-red-500"},[t._v(t._s(t.orderCount))])]),e("div",{staticClass:"flex flex-col justify-center text-sm bg-white p-2 shadow-2xl h-24 rounded-lg"},[e("div",{staticClass:"flex justify-between items-center"},[e("p",[t._v("Tổng tiền đơn hàng")]),e("VueIcon",{staticClass:"text-blue-500",attrs:{type:"mdi",path:t.mdiCash,size:"30"}})],1),e("p",{staticClass:"text-blue-500"},[t._v(t._s(t._f("numeral")(t.totalAmount))+" VND")])])]),e("div",{staticClass:"flex flex-col gap-2 border p-4 bg-white"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedYear,expression:"selectedYear"}],staticClass:"w-24 border outline-none",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedYear=e.target.multiple?a:a[0]}}},t._l(t.year,(function(a){return e("option",{key:a.year,domProps:{value:a.year}},[t._v(t._s(a.year))])})),0),e("LineChart",{attrs:{categories:t.categories,revenueByMonth:t.revenueByMonth}})],1)])},i=[],n=a(4373),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[t.isDataReady?e("apexChart",{staticClass:"w-full",attrs:{type:"line",height:"300",options:t.chartOptions,series:t.series}}):t._e()],1)},o=[],l={name:"SplineChart",props:["categories","revenueByMonth"],data(){return{isDataReady:!1,chartOptions:{chart:{id:"line_chart"},xaxis:{categories:[]},title:{text:"Doanh thu (triệu VND)",align:"center",margin:20,style:{fontSize:"18px",fontWeight:"bold",color:"#333"}}},series:[{name:"Doanh thu",data:[]}]}},watch:{categories(t){this.updateCategories(t)},revenueByMonth(t){this.updateSeries(t)}},methods:{updateCategories(t){this.chartOptions={...this.chartOptions,xaxis:{categories:t}},this.checkDataReady()},updateSeries(t){this.series=[{name:"Doanh thu",data:t}],this.checkDataReady()},checkDataReady(){this.categories.length&&this.revenueByMonth.length&&(this.isDataReady=!0)}},mounted(){this.updateCategories(this.categories),this.updateSeries(this.revenueByMonth)}},c=l,h=a(1656),u=(0,h.A)(c,r,o,!1,null,null,null),d=u.exports,g=a(2132),p={name:"HomeView",components:{LineChart:d},data(){return{year:"",selectedYear:(new Date).getFullYear(),categories:[],revenueByMonth:[],totalAmount:0,productCount:0,orderCount:0,userCount:0,mdiCash:g._Gg,mdiAccount:g.Gbn,mdiShoppingOutline:g.fIc,mdiPackageVariantClosed:g.QUk}},watch:{selectedYear:function(t){t&&this.getTotalByMonth()}},methods:{async getTotalByMonth(){try{const t=await n.A.get(`/Order/Statistical?year=${this.selectedYear}`),e=t.data.monthlyStatistics;this.totalAmount=t.data.totalAmountAllYears,this.year=t.data.yearlyStatistics,this.categories=Array.from({length:12},((t,e)=>`${e+1}`));const a=new Array(12).fill(0);e.map((t=>{t.month&&t.totalAmount&&(a[t.month-1]=(t.totalAmount/1e6).toFixed(2))})),this.revenueByMonth=a}catch(t){console.log(t)}},async getOrder(){try{const t=await n.A.get("/Order/getAll"),e=t.data?.map((t=>"Đã thanh toán"==t.paymentStatus));this.orderCount=e.length}catch(t){console.log(t)}},async getUser(){try{const t=await n.A.get("/User/getByPage");this.userCount=t.data.length}catch(t){console.log(t)}},async getProduct(){try{const t=await n.A.get("/Product/getAll");this.productCount=t.data.length}catch(t){console.log(t)}}},mounted(){this.getTotalByMonth(),this.getOrder(),this.getUser(),this.getProduct()}},y=p,m=(0,h.A)(y,s,i,!1,null,null,null),f=m.exports}}]);
//# sourceMappingURL=548.51b50155.js.map