"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[721],{6721:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-2 relative"},[e("div",{staticClass:"flex items-center gap-2 p-2"},[e("router-link",{attrs:{to:{name:"adminHome"}}},[t._v("Home:")]),e("VueIcon",{attrs:{type:"mdi",path:t.mdiChevronRight}}),e("p",{staticClass:"text-sm"},[t._v("Khuyến mãi")])],1),e("div",{staticClass:"flex flex-col gap-5 bg-white shadow-lg mt-1 p-4"},[e("div",{staticClass:"text-blue-500 flex self-end items-center gap-2 bg-blue-100 p-1 text-sm cursor-pointer",on:{click:function(e){t.open=!t.open}}},[e("VueIcon",{attrs:{type:"mdi",path:t.mdiCogOutline,size:"15"}}),t._v(" Thêm mặt hàng ")],1),t.open?e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 text-sm gap-4"},[e("div",{staticClass:"flex items-center"},[e("label",{staticClass:"w-32",attrs:{for:"name"}},[t._v("Tên voucher")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"p-1 outline-none border-2 w-full",attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e("div",{staticClass:"flex items-center"},[e("label",{staticClass:"w-32",attrs:{for:"discountRate"}},[t._v("Giảm %")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.discountRate,expression:"discountRate"}],staticClass:"p-1 outline-none border-2 w-full",attrs:{type:"text",id:"discountRate"},domProps:{value:t.discountRate},on:{input:function(e){e.target.composing||(t.discountRate=e.target.value)}}})]),e("div",{staticClass:"flex items-center"},[e("label",{staticClass:"w-32",attrs:{for:"code"}},[t._v("Mã")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"p-1 outline-none border-2 w-full",attrs:{type:"text",id:"code"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),e("div",{staticClass:"flex items-center"},[e("label",{staticClass:"w-32",attrs:{for:"startDate"}},[t._v("Ngày bắt đầu")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],staticClass:"p-1 outline-none border-2 w-full",attrs:{type:"date",id:"startDate"},domProps:{value:t.startDate},on:{input:function(e){e.target.composing||(t.startDate=e.target.value)}}})]),e("div",{staticClass:"flex items-center"},[e("label",{staticClass:"w-32",attrs:{for:"endDate"}},[t._v("Ngày kết thúc")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],staticClass:"p-1 outline-none border-2 w-full",attrs:{type:"date",id:"endDate"},domProps:{value:t.endDate},on:{input:function(e){e.target.composing||(t.endDate=e.target.value)}}})]),e("div",{staticClass:"p-2 w-20 text-center bg-blue-500 text-white cursor-pointer",on:{click:t.AddVoucher}},[t._v("Lưu")])]):t._e(),e("table",{staticClass:"w-full text-xs"},[t._m(0),e("tbody",t._l(t.data,(function(s,a){return e("tr",{key:s.promotionId},[e("td",{staticClass:"border text-center hover:text-blue-500 cursor-pointer",attrs:{scope:"col"}},[t._v("#"+t._s(a))]),e("td",{staticClass:"border text-center",attrs:{scope:"col"}},[t._v(t._s(s.name))]),e("td",{staticClass:"border text-center",attrs:{scope:"col"}},[t._v(t._s(s.discountRate))]),e("td",{staticClass:"border text-center",attrs:{scope:"col"}},[t._v(t._s(t.getTime(s.startDate)))]),e("td",{staticClass:"border text-center",attrs:{scope:"col"}},[t._v(t._s(s.endDate?t.getTime(s.endDate):"Không có"))]),e("td",{staticClass:"border text-center",attrs:{scope:"col"}},[t._v(t._s(s.isActive?"hoạt động":"không hoạt động"))]),e("td",{staticClass:"flex gap-2 justify-center items-center border"},[e("toggle-button",{attrs:{value:s.status},on:{change:e=>t.onChange(s.promotionId,e)}})],1)])})),0)])])])},o=[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"border"},[e("tr",{staticClass:"bg-gray-400 text-center"},[e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Id")]),e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Tên ")]),e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Giảm %")]),e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Ngày bắt đầu")]),e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Ngày kết thúc")]),e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Trạng thái")]),e("td",{staticClass:"p-2 border",attrs:{scope:"col"}},[t._v("Hành động")])])])}],n=s(2132),i=s(4373),r={name:"VoucherView",data(){return{data:[],page:1,limit:5,mdiChevronRight:n.mI8,mdiCheckCircle:n.NG3,mdiCloseCircle:n.BCx,mdiCogOutline:n.ED,open:!1,name:"",discountRate:"",startDate:null,endDate:null,code:""}},mounted(){this.getVoucher()},methods:{onChange(t,e){const s=e.value;console.log(s),this.update(t,s)},getTime(t){return new Date(t).toLocaleDateString("en-CA")},async AddVoucher(){try{await i.A.post("/Promotion/create",{name:this.name,discountRate:this.discountRate,code:this.code,startDate:this.getTime(this.startDate),endDate:this.endDate?this.getTime(this.endDate):null}),this.getVoucher(),this.$toast("Thêm thành công",{position:"top-right",timeout:5e3})}catch(t){console.log(t)}},async getVoucher(){try{const t=await i.A.get("/Promotion/GetAll");this.data=t.data}catch(t){console.log(t)}},async update(t,e){try{await i.A.patch(`/Promotion/update/${t}`,e,{headers:{"Content-Type":"application/json"}}),this.getVoucher()}catch(s){console.log(s)}}}},c=r,l=s(1656),d=(0,l.A)(c,a,o,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=721.a648db37.js.map