"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[223],{5223:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-5"},[e("div",{staticClass:"flex justify-between gap-2 p-4"},[e("div",{staticClass:"flex items-center gap-2 p-2"},[e("router-link",{attrs:{to:{name:"adminHome"}}},[t._v("Home:")]),e("VueIcon",{attrs:{type:"mdi",path:t.mdiChevronRight}}),e("router-link",{staticClass:"text-sm",attrs:{to:{name:"imageCollection"}}},[t._v("Ảnh")]),e("VueIcon",{attrs:{type:"mdi",path:t.mdiChevronRight}}),e("p",{staticClass:"text-sm"},[t._v(t._s(t.productName))])],1),e("label",{staticClass:"text-blue-500 flex items-center gap-2 bg-blue-100 p-1 text-sm cursor-pointer",attrs:{for:"file"}},[e("VueIcon",{attrs:{type:"mdi",path:t.mdiCogOutline,size:"15"}}),t._v(" Tải ảnh lên ")],1),e("input",{attrs:{type:"file",hidden:"",id:"file",name:"image"},on:{change:t.handleImageChange}})]),e("div",{staticClass:"grid grid-cols-12 gap-2 p-5 bg-white"},t._l(t.listImages,(function(a){return e("div",{key:a.productImageId,staticClass:"col-span-4 sm:col-span-3 md:col-span-2 border-2"},[e("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"relative"},[e("img",{staticClass:"w-full h-full",attrs:{src:a.imageUrl,alt:""}}),e("div",{staticClass:"absolute top-0 right-0 cursor-pointer border-b rounded-full bg-gray-300",on:{click:function(e){return t.Delete(a.productImageId)}}},[e("VueIcon",{attrs:{type:"mdi",path:t.mdiClose,size:"20"}})],1)]),e("viewer",{attrs:{src:a.imageUrl}},[e("img",{attrs:{src:t.src}})])],1)})),0)])},i=[],r=a(2132),o=a(1394),n=a(7844),c=a(4373),l={name:"ListImage",data(){return{mdiKeyboardBackspace:r.v3A,mdiClose:r.hyP,mdiCogOutline:r.ED,mdiChevronRight:r.mI8,productId:this.$route.params.id,image:"",listImages:"",productName:this.$route.query.img,percent:0}},watch:{"$route.params.id":function(t){this.productId=t},"$route.query.img":function(t){this.productName=t}},mounted(){this.getImage()},methods:{async handleImageChange(t){const e=t.target.files[0];if(e)try{const t=(0,n.KR)(o.i,`/product/${this.productId}/${e.name}`),a=(0,n.bp)(t,e);a.on("state_changed",(t=>{this.percent=Math.round(t.bytesTransferred/t.totalBytes*100)}),(t=>console.log(t)),(async()=>{const t=await(0,n.qk)(a.snapshot.ref);if(this.image=t,this.image)try{await c.A.post("/ProductImage/create",{imageUrl:this.image,productId:this.productId}),this.getImage(),this.$toast("Upload thành công",{position:"top-right",timeout:5e3})}catch(e){console.log(e)}}))}catch(a){console.error("Error uploading image:",a)}},async getImage(){try{const t=await c.A.get(`/ProductImage/getByProduct/${this.productId}`);this.listImages=t.data}catch(t){console.log(t)}},async Delete(t){try{await c.A.delete(`/ProductImage/delete/${t}`),this.getImage()}catch(e){console.log(e)}}}},d=l,m=a(1656),u=(0,m.A)(d,s,i,!1,null,null,null),g=u.exports}}]);
//# sourceMappingURL=223.ef15d0aa.js.map