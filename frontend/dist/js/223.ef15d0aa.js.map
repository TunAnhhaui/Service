{"version":3,"file":"js/223.ef15d0aa.js","mappings":"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","sources":["webpack://frontend/./src/components/admin/Image/ListImage/ListImage.vue","webpack://frontend/src/components/admin/Image/ListImage/ListImage.vue","webpack://frontend/./src/components/admin/Image/ListImage/ListImage.vue?e13e","webpack://frontend/./src/components/admin/Image/ListImage/ListImage.vue?126d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"p-5\"},[_c('div',{staticClass:\"flex justify-between gap-2 p-4\"},[_c('div',{staticClass:\"flex items-center gap-2 p-2\"},[_c('router-link',{attrs:{\"to\":{name:'adminHome'}}},[_vm._v(\"Home:\")]),_c('VueIcon',{attrs:{\"type\":\"mdi\",\"path\":_vm.mdiChevronRight}}),_c('router-link',{staticClass:\"text-sm\",attrs:{\"to\":{name:'imageCollection'}}},[_vm._v(\"Ảnh\")]),_c('VueIcon',{attrs:{\"type\":\"mdi\",\"path\":_vm.mdiChevronRight}}),_c('p',{staticClass:\"text-sm\"},[_vm._v(_vm._s(_vm.productName))])],1),_c('label',{staticClass:\"text-blue-500 flex items-center gap-2 bg-blue-100 p-1 text-sm cursor-pointer\",attrs:{\"for\":\"file\"}},[_c('VueIcon',{attrs:{\"type\":\"mdi\",\"path\":_vm.mdiCogOutline,\"size\":\"15\"}}),_vm._v(\" Tải ảnh lên \")],1),_c('input',{attrs:{\"type\":\"file\",\"hidden\":\"\",\"id\":\"file\",\"name\":\"image\"},on:{\"change\":_vm.handleImageChange}})]),_c('div',{staticClass:\"grid grid-cols-12 gap-2 p-5 bg-white\"},_vm._l((_vm.listImages),function(item){return _c('div',{key:item.productImageId,staticClass:\"col-span-4 sm:col-span-3 md:col-span-2 border-2\"},[_c('div',{directives:[{name:\"viewer\",rawName:\"v-viewer\"}],staticClass:\"relative\"},[_c('img',{staticClass:\"w-full h-full\",attrs:{\"src\":item.imageUrl,\"alt\":\"\"}}),_c('div',{staticClass:\"absolute top-0 right-0 cursor-pointer border-b rounded-full bg-gray-300\",on:{\"click\":function($event){return _vm.Delete(item.productImageId)}}},[_c('VueIcon',{attrs:{\"type\":\"mdi\",\"path\":_vm.mdiClose,\"size\":\"20\"}})],1)]),_c('viewer',{attrs:{\"src\":item.imageUrl}},[_c('img',{attrs:{\"src\":_vm.src}})])],1)}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"p-5\">\r\n        <div class=\"flex justify-between gap-2 p-4\">\r\n            <div class=\"flex items-center gap-2 p-2\">\r\n                <router-link :to=\"{name:'adminHome'}\">Home:</router-link>\r\n                <VueIcon type=\"mdi\" :path=\"mdiChevronRight\"/>\r\n                <router-link :to=\"{name:'imageCollection'}\" class=\"text-sm\">Ảnh</router-link>\r\n                <VueIcon type=\"mdi\" :path=\"mdiChevronRight\"/>\r\n                <p class=\"text-sm\">{{productName}}</p>\r\n            </div>            \r\n            <label for=\"file\" class=\"text-blue-500 flex items-center gap-2 bg-blue-100 p-1 text-sm cursor-pointer\">\r\n                <VueIcon type=\"mdi\" :path=\"mdiCogOutline\" size=\"15\"/>\r\n                Tải ảnh lên\r\n            </label>            \r\n            <input type=\"file\" hidden id=\"file\" name=\"image\" @change=\"handleImageChange\">\r\n        </div>\r\n        <div class=\"grid grid-cols-12 gap-2 p-5 bg-white\">\r\n            <div v-for=\"item in listImages\" :key=\"item.productImageId\" class=\"col-span-4 sm:col-span-3 md:col-span-2 border-2\">\r\n                <div class=\"relative\" v-viewer>\r\n                    <img :src=\"item.imageUrl\" alt=\"\" class=\"w-full h-full\">\r\n                    <div @click=\"Delete(item.productImageId)\" class=\"absolute top-0 right-0 cursor-pointer border-b rounded-full bg-gray-300\"><VueIcon type=\"mdi\" :path=\"mdiClose\" size=\"20\" /></div>\r\n                </div>\r\n                <viewer :src=\"item.imageUrl\">\r\n                    <img :src=\"src\">\r\n                </viewer>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mdiClose, mdiKeyboardBackspace,mdiCogOutline,mdiChevronRight} from \"@mdi/js\"\r\nimport {imgDb} from '../../../../firebase'\r\nimport { ref, uploadBytesResumable,getDownloadURL } from 'firebase/storage'\r\nimport axios from \"axios\";\r\nexport default {\r\n    name:\"ListImage\",\r\n    data(){\r\n        return{\r\n            mdiKeyboardBackspace,mdiClose,mdiCogOutline,mdiChevronRight,\r\n            productId:this.$route.params.id,\r\n            image:\"\",\r\n            listImages:\"\",\r\n            productName:this.$route.query.img,\r\n            percent:0\r\n        }\r\n    },\r\n    watch:{\r\n        \"$route.params.id\":function(newValue){\r\n            this.productId=newValue\r\n        },\r\n        \"$route.query.img\":function(newValue){\r\n            this.productName=newValue\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getImage()\r\n    },\r\n    methods:{\r\n        async handleImageChange(event) {\r\n            const file = event.target.files[0];\r\n            if (!file) return;\r\n            try {\r\n                const imgRef = ref(imgDb, `/product/${this.productId}/${file.name}`);\r\n                const uploadTask = uploadBytesResumable(imgRef, file);\r\n                uploadTask.on(\r\n                    \"state_changed\",\r\n                    (snapshot) => {\r\n                        this.percent = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n                    },\r\n                    (err) => console.log(err),\r\n                    async () => {\r\n                        const url = await getDownloadURL(uploadTask.snapshot.ref);\r\n                        this.image = url;\r\n                        if(this.image){\r\n                            try {\r\n                                await axios.post(\"/ProductImage/create\",{\r\n                                    imageUrl:this.image,\r\n                                    productId:this.productId\r\n                                })\r\n                                this.getImage()\r\n                                this.$toast(`Upload thành công`, {\r\n                                    position: \"top-right\",\r\n                                    timeout: 5000\r\n                                });\r\n                            } catch (err) {\r\n                                console.log(err)\r\n                            }\r\n                        }\r\n                    }\r\n                );\r\n            } catch (err) {\r\n                console.error(\"Error uploading image:\", err);\r\n            }\r\n        },\r\n        async getImage(){\r\n            try {\r\n                const res=await axios.get(`/ProductImage/getByProduct/${this.productId}`)\r\n                this.listImages=res.data\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        },\r\n        async Delete(id){\r\n            try {\r\n                await axios.delete(`/ProductImage/delete/${id}`)\r\n                this.getImage()\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ListImage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ListImage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ListImage.vue?vue&type=template&id=2c420ebf\"\nimport script from \"./ListImage.vue?vue&type=script&lang=js\"\nexport * from \"./ListImage.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","name","_v","mdiChevronRight","_s","productName","mdiCogOutline","on","handleImageChange","_l","listImages","item","key","productImageId","directives","rawName","imageUrl","$event","Delete","mdiClose","src","staticRenderFns","data","mdiKeyboardBackspace","productId","$route","params","id","image","query","img","percent","watch","newValue","mounted","getImage","methods","event","file","target","files","imgRef","ref","imgDb","uploadTask","uploadBytesResumable","snapshot","Math","round","bytesTransferred","totalBytes","err","console","log","url","getDownloadURL","axios","post","$toast","position","timeout","error","res","get","delete","component"],"sourceRoot":""}